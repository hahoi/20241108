<html>
  <head>
    <style>
      /* 表格基本樣式 */
      table {
        width: 100%;
        border-collapse: collapse;
        border-spacing: 0;
      }
      th,
      td {
        padding: 8px;
        border: 1px solid #ddd;
        text-align: left;
      }
      /* 隱藏表格視圖的多餘欄位（從第5欄起），只顯示前4欄 */
      .table-view thead th:nth-child(n + 5),
      .table-view tbody td:nth-child(n + 5) {
        display: none;
      }
      /* 卡片樣式 */
      .card-row td {
        background-color: #f9f9f9;
        border: none;
        padding: 16px;
      }
      .card {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 16px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
      .card-item {
        padding: 8px 0;
        border-bottom: 1px solid #eee;
      }
      .card-item:last-child {
        border-bottom: none;
      }
      .card-item-title {
        font-weight: bold;
        color: #555;
        display: inline-block;
        width: 120px;
      }
      /* 右下角固定位置的按鈕樣式 */
      .back-button {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        transition: background-color 0.3s;
      }
      .back-button:hover {
        background-color: #0056b3;
      }
    </style>
  </head>
  <body>
    <table id="dataTable" class="dataframe table-view">
      <thead>
        <tr>
          <th>鄉鎮</th>
          <th>局處</th>
          <th>案件名稱</th>
          <th>經費</th>
          <th>中央核定補助計畫管制期程</th>
          <th>預定期程</th>
          <th>截至113/10/17最新執行情形</th>
        </tr>
      </thead>
      <tbody>
        <!-- Original table rows content with onclick attribute goes here -->
        <tr onclick="toggleCard(this)">
          <td>潮州鎮</td>
          <td>工務處</td>
          <td>屏東縣光春國中飛夢林學園新建工程</td>
          <td>總經費79,820,000(縣款)</td>
          <td>__</td>
          <td>預計完工日期：113/12/21</td>
          <td>
            截至113/10/11止 預定進度:92.08 實際進度:94%
            施作內容：木工及多功能棟陰井及滲透井測量挖掘及埋設、景觀回填及整地。決議:請持續掌握進度。
          </td>
        </tr>
        <tr onclick="toggleCard(this)">
          <td>潮州鎮</td>
          <td>工務處</td>
          <td>
            縣道185甲線(16K+386~19K+796)及縣道185線(45K+775~47K+580)道路拓寬工程
          </td>
          <td>總經費429,062,000中央補助:364,703,000</td>
          <td>__</td>
          <td>完工:預計於115/6</td>
          <td>
            目前設計公司修正細部設第二版，已於113/10/11核定，預計於113/10/21前提送工程預算書圖，並於113/10月下旬簽辦工程發包作業。決議:請持續掌握進度。
          </td>
        </tr>
        <tr onclick="toggleCard(this)">
          <td>潮州鎮</td>
          <td>水利處</td>
          <td>民治溪排水改善工程(茂林橋(4K+252)~泗林橋)(含橋梁改建)</td>
          <td>
            總經費：173,604,000中央補助：工程費124,500,000用地費34,090,000
          </td>
          <td>請於112年11月底前完成招標作業</td>
          <td>工程完工：114/4</td>
          <td>
            截至10/16止，預定進度40.55%、實際進度42.5%，目前施作工項：右岸4K+600~750砌石護岸施作。
          </td>
        </tr>
        <tr onclick="toggleCard(this)">
          <td>潮州鎮</td>
          <td>水利處</td>
          <td>屏東縣潮州鎮污水下水道系統水資源回收中心第一期新建統包工程</td>
          <td>總經費：554,539,100中央補助：工程費515,721,363</td>
          <td>依契約規定期程竣工</td>
          <td>工程完工：114/9</td>
          <td>
            截至113/10/15，預定進度9.98%，實際進度11.38%，超前1.4%。已完成圍籬、洗車台、施工便道、工務所等臨時假設工程、基礎工程、進抽站連續壁工程，目前辦理生態草溝、二沉池工程施作中。
          </td>
        </tr>
        <tr onclick="toggleCard(this)">
          <td>潮州鎮</td>
          <td>體發中心</td>
          <td>潮州棒球場後續營運管理</td>
          <td>__</td>
          <td>__</td>
          <td>__</td>
          <td>目前場館由中心管理，如需調整管理方式，擬俟全民運後再行研議。</td>
        </tr>
        <tr onclick="toggleCard(this)">
          <td>潮州鎮</td>
          <td>勞青處</td>
          <td>潮青特區</td>
          <td>__</td>
          <td></td>
          <td>
            113/10 預計完成初步工程經費估算、撰寫中央補助計畫及提案爭取經費
          </td>
          <td>
            1.113/9/25向結構技師廠商詢價進行3棟建築物結構詳評所需經費(約95萬元)，相關財源尋覓中。
            2.113/10/11函文提案補助計畫向教育部爭取經費。(會中補充：教育部長113/10/21視察，請本府先完成特區內建物耐震初、詳評報告後送部，將送院爭取建設經費。)決議：建物初詳評經費請速簽辦報告單。
          </td>
        </tr>
        <tr onclick="toggleCard(this)">
          <td>潮州鎮</td>
          <td>農業處</td>
          <td>屏東縣農業國際化標準包裝加工廠統包工程</td>
          <td>總經費561,556,000中央補助505,400,000</td>
          <td></td>
          <td>開工：111/9/7 (629.5天日曆天)竣工：113/11/1</td>
          <td>
            截至113/10/16日止，預定進度95.42%、實際進98.77%，施作外電管線銜接及弱電穿線工程。
          </td>
        </tr>
        <tr onclick="toggleCard(this)">
          <td>潮州鎮</td>
          <td>農業處</td>
          <td>屏東縣農業國際化標準包裝加工廠升級計畫統包工程</td>
          <td>總經費213,000,000中央補助197,000,000</td>
          <td>
            113/8/6中央檢討會議決議:務必於8/20工程上網招標核定補助計畫務應於113年12月16日(星期一)前執行完成(工程竣工)
          </td>
          <td>PCM及監造簽約：113/1/19</td>
          <td>
            1.辦理統包需求書內容檢討，經彙整委託營運廠商需求後，案於113/7/9召開外部審查會議，專管單位依據會議結論重新調整需求項量，計畫金額由原2.13億調增至2.73億。2.本府於113/9/19拜會農糧署提報經費調增需求，該署請本府重新呈報變更研提計畫，本府10月底前提送爭取經費。
          </td>
        </tr>
      </tbody>
    </table>

    <!-- 回上一頁按鈕 -->
    <button class="back-button" onclick="goBack()">回上一頁</button>

    <script>
      function toggleCard(row) {
        if (
          row.nextElementSibling &&
          row.nextElementSibling.classList.contains("card-row")
        ) {
          row.nextElementSibling.remove();
          return;
        }
        const existingCardRow = document.querySelector(".card-row");
        if (existingCardRow) existingCardRow.remove();

        const cardRow = document.createElement("tr");
        cardRow.classList.add("card-row");
        const cardCell = document.createElement("td");
        cardCell.colSpan = 4;
        const controlPeriod = row.children[4].textContent;
        const schedule = row.children[5].textContent;
        const latestProgress = row.children[6].textContent;
        cardCell.innerHTML = `
          <div class="card">
            <div class="card-item">
              <span class="card-item-title">中央核定補助計畫管制期程：</span>${controlPeriod}
            </div>
            <div class="card-item">
              <span class="card-item-title">預定期程：</span>${schedule}
            </div>
            <div class="card-item">
              <span class="card-item-title">最新執行情形：</span>${latestProgress}
            </div>
          </div>
        `;
        cardRow.appendChild(cardCell);
        row.parentNode.insertBefore(cardRow, row.nextSibling);
      }

      function goBack() {
        window.history.back();
      }
    </script>
  </body>
</html>
