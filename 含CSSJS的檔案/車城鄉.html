<html>
  <head>
    <style>
      /* 表格基本樣式 */
      table {
        width: 100%;
        border-collapse: collapse;
        border-spacing: 0;
      }
      th,
      td {
        padding: 8px;
        border: 1px solid #ddd;
        text-align: left;
      }
      /* 隱藏表格視圖的多餘欄位（從第5欄起），只顯示前4欄 */
      .table-view thead th:nth-child(n + 5),
      .table-view tbody td:nth-child(n + 5) {
        display: none;
      }
      /* 卡片樣式 */
      .card-row td {
        background-color: #f9f9f9;
        border: none;
        padding: 16px;
      }
      .card {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 16px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
      .card-item {
        padding: 8px 0;
        border-bottom: 1px solid #eee;
      }
      .card-item:last-child {
        border-bottom: none;
      }
      .card-item-title {
        font-weight: bold;
        color: #555;
        display: inline-block;
        width: 120px;
      }
      /* 右下角固定位置的按鈕樣式 */
      .back-button {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        transition: background-color 0.3s;
      }
      .back-button:hover {
        background-color: #0056b3;
      }
    </style>
  </head>
  <body>
    <table id="dataTable" class="dataframe table-view">
      <thead>
        <tr>
          <th>鄉鎮</th>
          <th>局處</th>
          <th>案件名稱</th>
          <th>經費</th>
          <th>中央核定補助計畫管制期程</th>
          <th>預定期程</th>
          <th>截至113/10/17最新執行情形</th>
        </tr>
      </thead>
      <tbody>
        <!-- Original table rows content with onclick attribute goes here -->
        <tr onclick="toggleCard(this)">
          <td>車城鄉</td>
          <td>交旅處</td>
          <td>四重溪公共浴池改建及環境營造計畫</td>
          <td>總經費115,000,000(縣款)</td>
          <td>__</td>
          <td>
            113/5 工程上網公告113/7 工程決標113/11 開工(工期:547日曆天)115/5
            完工預計113/11 開工
          </td>
          <td>
            目前已分年編列預算支應工程款，並於113/7/12完成簽約程序，113/9/12辦理開工地方說明會，9/26辦理動土典禮，建照申請中，預計11月初開工。決議:請持續掌握進度。
          </td>
        </tr>
        <tr onclick="toggleCard(this)">
          <td>車城鄉</td>
          <td>交旅處</td>
          <td>落山風風景特定區車城水岸及環境營造計畫(三期)</td>
          <td>總經費34,637,476中央補助經費:18,240,000</td>
          <td>__</td>
          <td>113/11 工程決標112/12 開工(工期:180日曆天)113/11月底 預計完工</td>
          <td>
            1.截至113/9/30，預定進度:20.51%，實際進度:20.99%，本案於施作沙灘步道基礎作業時因海水漲潮影響原設計基礎開挖施作，已於113/5/13先行辦理停工並研議因應做法。2.另為達本案完整功能性與提升遊客服務品質及現況實際需求等因素調整，經設計單位評估檢討後需求總經費達3964萬元，刻正辦理變更設計程序中(在原契約價金50%變更範圍內)。3.另價金超過50%部分(約500萬)預計於11/10完成原契約變更程序後，辦理二標工程發包作業。決議：請注意施作工法。
          </td>
        </tr>
        <tr onclick="toggleCard(this)">
          <td>車城鄉</td>
          <td>工務處</td>
          <td>屏東縣車城國中室內游泳練習池興建工程</td>
          <td>總經費:146,500,000(縣款)</td>
          <td></td>
          <td>完成設計:114/6完工:116/6</td>
          <td>預計113/10/23召開第二次規劃成果審查決議:請持續掌握進度。</td>
        </tr>
        <tr onclick="toggleCard(this)">
          <td>車城鄉</td>
          <td>工務處</td>
          <td>屏東縣車城鄉住宿式長照機構新建工程</td>
          <td>總經費:531,625,000中央補助:279,440,000</td>
          <td>
            110/9/1中央核定補助(109-113年度)113/5/3衛生福利部同意展延114/12/31
          </td>
          <td>114/09 竣工完工:預計115/6月(縣長施政總報告)</td>
          <td>
            截至10/14止，預定進度28.64%，實際進度44.3%施作工項：R2F已澆置完成，結構體大致完成，續行室內配管及避體粉刷決議:請持續掌握進度。
          </td>
        </tr>
        <tr onclick="toggleCard(this)">
          <td>車城鄉</td>
          <td>工務處</td>
          <td>屏東縣車城鄉衛生所重建統包工程</td>
          <td>總經費:140,699,734(縣款)</td>
          <td>__</td>
          <td>竣工：預定114/1/15</td>
          <td>
            工務處1.截至10/14止，預定進度90.81%，實際進度90.92%。追加部分裝修工程已於113/10/9復工施作，追加工期95日曆天，預計114/1/15竣工。2.建物側牆白華現象部分，經現場勘查確認現況，廠商將以打除後重新批土噴漆方式處理。衛生局：1.爭取衛生福利部「優化偏鄉醫療精進計畫第二期」經費補助7,500萬元，於10/18至國健署審查會報告。2.醫療、資訊及雜項設備備標中。決議：矮灌植栽及招牌請再加強。
          </td>
        </tr>
        <tr onclick="toggleCard(this)">
          <td>車城鄉</td>
          <td>海魚所</td>
          <td>海口、後壁湖及琉球新漁港曳船道及上架場設施改善工程</td>
          <td>設計經費238,000中央補助166,600</td>
          <td></td>
          <td>設計完成:113/10/15</td>
          <td>
            113/09/27設計廠商提送修正後細部設計113/10/09本所核定修正後細部設計(預計10/21送漁業署備查並同步爭取補助經費)
          </td>
        </tr>
        <tr onclick="toggleCard(this)">
          <td>車城鄉</td>
          <td>海魚所</td>
          <td>112年海口漁港內突堤及北碼頭改建工程（不含設計)</td>
          <td>總經費120,000,000中央補助108,000,000</td>
          <td>__</td>
          <td>開工:112/12/6開工(450日曆天)竣工:114/2/27</td>
          <td>
            截至113/10/15，預定進度64.978%，實際進度72.875%(超前7.8%)，施作北碼頭、北內堤及北防波堤堤面混凝土澆置。
          </td>
        </tr>
        <tr onclick="toggleCard(this)">
          <td>車城鄉</td>
          <td>民政處</td>
          <td>
            屏東縣政府警察局恆春分局車城分駐所與恆春戶政事務所車城辦公室辦公廳舍拆除重建工程
          </td>
          <td>總經費54,834,400(縣款)</td>
          <td></td>
          <td>
            112/7 工程上網公告112/8 工程決標112/10 開工(工期:463日曆天)113/6
            工程進度50%114/1 完工預計114/1主體工程完工、114/4完成設備進場
          </td>
          <td>
            1.截至10/15止，預定進度82.42%，實際進度71.06%。2.目前施作主要工項為：安裝衛浴設備及燈具，外牆塗料、清水模及防水工程，地磚鋪設。(會中補充：主體預計於114年農曆年前完工，接續辦理設備進場安裝，預計於114/4月中旬完工)決議:請持續掌握進度。
          </td>
        </tr>
      </tbody>
    </table>

    <!-- 回上一頁按鈕 -->
    <button class="back-button" onclick="goBack()">回上一頁</button>

    <script>
      function toggleCard(row) {
        if (
          row.nextElementSibling &&
          row.nextElementSibling.classList.contains("card-row")
        ) {
          row.nextElementSibling.remove();
          return;
        }
        const existingCardRow = document.querySelector(".card-row");
        if (existingCardRow) existingCardRow.remove();

        const cardRow = document.createElement("tr");
        cardRow.classList.add("card-row");
        const cardCell = document.createElement("td");
        cardCell.colSpan = 4;
        const controlPeriod = row.children[4].textContent;
        const schedule = row.children[5].textContent;
        const latestProgress = row.children[6].textContent;
        cardCell.innerHTML = `
          <div class="card">
            <div class="card-item">
              <span class="card-item-title">中央核定補助計畫管制期程：</span>${controlPeriod}
            </div>
            <div class="card-item">
              <span class="card-item-title">預定期程：</span>${schedule}
            </div>
            <div class="card-item">
              <span class="card-item-title">最新執行情形：</span>${latestProgress}
            </div>
          </div>
        `;
        cardRow.appendChild(cardCell);
        row.parentNode.insertBefore(cardRow, row.nextSibling);
      }

      function goBack() {
        window.history.back();
      }
    </script>
  </body>
</html>
